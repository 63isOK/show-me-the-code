# unicode支持

\u200d,是一个特殊的unicode,叫`零宽连字`,
全称 zero width joiner,简称 zwj.
这个字符是不打印字符,用于将两个单独的字符组成连字,
常用于表情包.

整个结构非常简单:

- 初始化资源
- 画一幅画呈现
- 等待事件处理

这幅画就是展示unicode字符,其中包括各国文字和各种内置文字.

默认风格tcell.StyleDefault具体是啥样的,后面可以深入分析.

## 打印一行

先看一下打印一行的逻辑,打印一个字符串,
也是一个个字符开始打印的,

- 处理表情符号
  - 判断是不是'零宽连字符',
  - 表情符号的unicode格式是 "unicode 200d unicode"
  - 或者是带多个零宽连字符的
- 非表情符号,直接打印

整个写法也蛮有意思,类似状态机的处理思路:

- 零宽连字符的处理
- 读取下一个字符,并检查缓冲deferred
  - 如果下一个字符是非表情符号(那么就是一个新的字符)
    - 将deferred中的完整字符打印
    - 并将deferred清空,并将下一个字符丢到deferred,等待下一轮处理
  - 如果下一个字符是零宽字符(那么说明是一个复杂表情字符)
    - 追加到deferred
- 一直重复第二步,直到字符串遍历完
  - 尾巴:处理deferred中的缓冲

## 整幅画

- 从简单的英文到中日韩
- 特殊的额组合unicoded/动作
- 表情符号以及多个零宽连字符组合的丰富表情包
- 最后是通过多行画出了一个`田`字结构
  - 里面都是利用tcell定义的一些常用符号来实现

最后,这个demo主要是展示tcell支持的unicode能力.
