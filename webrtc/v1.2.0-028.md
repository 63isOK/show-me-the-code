# sfu

## readme

示例的功能：sfu

准备工作：

编译好示例程序

整个流程：

里面有两个角色：推流者和拉流者，都是通过浏览器进行推流和拉流,可以有多个拉流者

## 粗略分析

只分析示例程序，不深入webrtc api中

1. 首先注册一种编码格式 vp8/90000
2. 创建配置和连接
3. 初始化一个信道数组和一个读写锁
4. 设置OnTrack回调
5. 对offer进行解码，调用设置远端sdp的接口(这个接口表示整个连接的开始)
6. 生成answer，供浏览器使用,到此，推流者的逻辑就全了
7. for循环处理可能出现的拉流者

拉流者逻辑：

1. 将页面上offer对应的base64字符串进行解码处理
2. 利用配置创建一个连接
3. 设置一些采样track(后面会重点分析)
4. 设置远端sdp，生成answer
