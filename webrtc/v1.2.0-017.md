# webrtc

v1.2.0版本的webrtc接口

## 目录分析

源码文件有37个(test文件不算)，从文件名看，webrtc对外提供的接口
也是基于我们之前分析的那么依赖库。

- 定义错误
- 媒体格式
- datachannel
- 配置
- 证书
- 捆绑策略，新东西
- sdp
- sctp
- rtp收发
- mux多路复用器
- p2p连接/状态
- offer/answer
- ice
- dtls

从文件名看出这些，源码里肯定会更加细致

## 定义错误

之前分析的rtcerr也是定义了一些错误的

- ErrUnknownType 未识别消息
- ErrConnectionClosed 连接断开后还有操作
- ErrCertificateExpired x509整数过期
- ErrNoTurnCredencials turn的url未带认证信息
- ErrTurnCredencials turn的url只带了部分认证信息
- ErrExistingTrack track已存在
- ErrPrivateKeyType 参与者的私有key生成证书时不被支持
- ErrModifyingPeerIdentity p2p已经连接了，还想修改身份信息
- ErrModifyingCertificates p2p已经连接了，还想修改证书
- ErrModifyingBundlePolicy p2p已经连接了，还想修改绑定策略
- ErrModifyingRtcpMuxPolicy p2p已经连接了，还想修改多路复用策略
- ErrModifyingIceCandidatePoolSize p2p已经连接了，还想修改ice候选池的大小
- ErrStringSizeLimit rfc规定了字符串长度最大是65535,超过就报错
- ErrMaxDataChannelID 表示datachannel号操作了最大的限制值
- ErrNegotiatedWithoutID 创建datachannel时，用true表示要提供协商信息，但并没有
- ErrRetransmitsOrPacketLifeTime 创建datachannel时，
同时指定了包最大生命周期/最大传输时间，v1.2.0不能同时指定的

## RTCPeerConnection的构造

RTCPeerConnection是标准固定的核心对象之一，所以先从她开始分析

有个构造函数是通过Config配置来生成一个连接(在这个库中，连接特指p2p连接)，
所以在分析构造之前，我们需要先了解这个配置

RTCConfiguration 作用是在p2p连接的建立/重建中定义一系列参数
